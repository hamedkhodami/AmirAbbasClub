{% extends 'base/base.html' %}

{% block title %}Ù„ÛŒØ³Øª ÙˆØ±Ø²Ø´Ú©Ø§Ø±Ø§Ù†{% endblock %}

{% block extra_style %}
<style>
  .table-row:hover {
    background-color: rgba(255, 255, 255, 0.03);
  }
</style>
{% endblock %}

{% block body %}
<div class="max-w-7xl mx-auto mt-12 px-4">
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
    <h2 class="text-3xl font-bold text-red-500">Ù„ÛŒØ³Øª ÙˆØ±Ø²Ø´Ú©Ø§Ø±Ø§Ù†</h2>

    <div class="flex flex-col sm:flex-row items-center gap-2">
      <form method="get" class="flex items-center gap-2">
        <input type="text" name="q" placeholder="Ø¬Ø³ØªØ¬Ùˆ..."
               value="{{ request.GET.q }}"
               class="px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all w-64" />
        <button type="submit"
                class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors">
          ğŸ”
        </button>
      </form>

      <a href="{% url 'public:home' %}"
         class="bg-white text-gray-900 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-200 transition">
        ğŸ  ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
      </a>
    </div>
  </div>

  <div class="overflow-x-auto rounded-lg shadow-lg border border-gray-700">
    <table class="w-full text-sm text-right text-gray-300">
      <thead class="bg-gray-700 text-gray-200 text-sm">
        <tr>
          <th class="px-4 py-3">Ù†Ø§Ù…</th>
          <th class="px-4 py-3">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</th>
          <th class="px-4 py-3">Ø¬Ù†Ø³ÛŒØª</th>
          <th class="px-4 py-3">Ù†Ù‚Ø´</th>
          <th class="px-4 py-3">Ø¹Ù…Ù„ÛŒØ§Øª</th>
        </tr>
      </thead>
      <tbody class="bg-gray-900 divide-y divide-gray-800">
        {% for athlete in athletes %}
        <tr class="table-row transition-all">
          <td class="px-4 py-3 font-medium">{{ athlete.full_name }}</td>
          <td class="px-4 py-3">{{ athlete.phone_number }}</td>
          <td class="px-4 py-3">{{ athlete.get_gender_display }}</td>
          <td class="px-4 py-3">{{ athlete.get_role_display }}</td>
          <td class="px-4 py-3 space-x-2 space-x-reverse text-xs">
            <form method="post" action="{% url 'apps.account:change_user_role' athlete.id %}" class="inline">
              {% csrf_token %}
              <button type="submit"
                      onclick="return confirm('Ø¢ÛŒØ§ Ø§Ø² ØªØºÛŒÛŒØ± Ù†Ù‚Ø´ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')"
                      class="text-yellow-400 hover:text-yellow-300 font-semibold">
                ğŸ”„ ØªØºÛŒÛŒØ± Ù†Ù‚Ø´
              </button>
            </form>
            <a href="{% url 'apps.payment:payment_profile' athlete.id %}"
               class="text-blue-400 hover:text-blue-300 font-semibold">
              ğŸ’³ Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ‡Ø§
            </a>
            <a href="{% url 'apps.payment:payment_create' athlete.id %}"
               class="text-green-400 hover:text-green-300 font-semibold">
              â• Ø«Ø¨Øª Ù¾Ø±Ø¯Ø§Ø®Øª
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center py-6 text-gray-400">Ù‡ÛŒÚ† ÙˆØ±Ø²Ø´Ú©Ø§Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% if is_paginated %}
  <div class="mt-6 flex justify-center items-center gap-4 text-sm text-gray-300">
    {% if page_obj.has_previous %}
      <a href="?q={{ request.GET.q }}&page={{ page_obj.previous_page_number }}"
         class="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded-lg">â† Ù‚Ø¨Ù„ÛŒ</a>
    {% endif %}
    <span>ØµÙØ­Ù‡ {{ page_obj.number }} Ø§Ø² {{ page_obj.paginator.num_pages }}</span>
    {% if page_obj.has_next %}
      <a href="?q={{ request.GET.q }}&page={{ page_obj.next_page_number }}"
         class="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded-lg">Ø¨Ø¹Ø¯ÛŒ â†’</a>
    {% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}